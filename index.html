<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro Pitahaya Org</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="container">
      <img src="./media/images/logos/logo.webp" alt="Pitamex" class="logo" />
      <h1>Registro Pitahaya Orgs</h1>

      <div id="form-root"></div>

      <div class="export-section">
        <button id="export">üì§ Exportar a Excel</button>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script>
      // Preguntas agrupadas por flujo
      const QUESTION_GROUPS = {
        // Si selecciona "Productor"
        plantOrEsqueaje: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
          {
            id: "q5",
            label: "Tipo de terreno",
            options: ["Propio", "Rentado", "Ejido"],
          },
          {
            id: "q6",
            label: "Superficie disponible (ha)",
            options: ["0.1", "1", "2-5", "5+"],
          },
          {
            id: "q4",
            label: "Disponibilidad de agua",
            options: ["Pozo", "Canal", "Pipa", "Solo lluvia"],
          },
          {
            id: "q7",
            label: "¬øZona con heladas?",
            options: ["S√≠", "No", "No s√©"],
          },
          {
            id: "q8",
            label: "¬øTiene energ√≠a el√©ctrica?",
            options: ["S√≠", "No"],
          },
          {
            id: "q9",
            label: "¬øCuenta con mano de obra?",
            options: ["S√≠", "A veces", "No"],
          },
          {
            id: "q10",
            label: "Nivel de decisi√≥n",
            options: ["100% seguro", "Evaluando", "Solo viendo"],
          },
          {
            id: "q11",
            label: "Tiempo estimado para iniciar",
            options: ["Inmediato", "Pr√≥ximo ciclo", "Sin fecha"],
          },
        ],
        // Si selecciona "Comercializador"
        frut: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Ciudad / Estado",
          },
          {
            id: "q5",
            label: "Tipo de fruta",
            options: ["Blanca", "Color", "Ambas"],
          },
          {
            id: "q6",
            label: "Volumen",
            options: ["5-50", "50-300", "300-1000", "1000"],
          },
          {
            id: "q7",
            label: "Frecuencia",
            options: ["√önica", "Semanal", "Quincenal", "Mensual", "Temporada"],
          },
          {
            id: "q8",
            label: "Presentaci√≤n",
            options: ["Granel", "Caja 5kg", "Caja 6.8kg", "Otro"],
          },
          {
            id: "q9",
            label: "Calidad",
            options: ["Seleccionada", "Comercial", "Segunda"],
          },
          {
            id: "q10",
            label: "Lugar de entrega",
            options: ["Negocio", "CEDIS", "Central", "Punto de carga"],
          },
          {
            id: "q11",
            label: "Flete",
            options: ["Cliente", "Proovedor", "Depende"],
          },
          {
            id: "q12",
            label: "Transporte",
            options: ["S√¨", "No"],
          },
          {
            id: "q13",
            label: "Pago",
            options: ["Contado", "Contra entrega", "Cr√®dito"],
          },
          {
            id: "q14",
            label: "Cr√®dito",
            options: ["7", "15", "30", ">30"],
          },
          {
            id: "q15",
            label: "Inicio",
            options: [
              "Inmediato",
              "Proxima semana",
              "Pr√≤ximo mes",
              "Solo viendo",
            ],
          },
        ],
        // Si selecciona "Consumidor"
        asesoryTec: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
        ],
        process: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
        ],
        providers: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
        ],
        info: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
        ],
      };

      // Primera pregunta base
      const FIRST_QUESTION = {
        id: "q1",
        label: "Selecci√≥n de Inter√©s",
        // options: ["productor", "comercializador", "consumidor"],
        options: [
          { uuid: "plantOrEsqueaje", label: "Planta / Esqueje" },
          { uuid: "frut", label: "Fruta (Nacional / Exportaci√≥n)" },
          { uuid: "asesoryTec", label: "Asesor√≠a T√©cnica" },
          { uuid: "process", label: "Procesado (Congelado / Deshidratado)" },
          { uuid: "providers", label: "Proveedores / Alianzas / Estancias" },
          { uuid: "info", label: "Solo Informaci√≥n" },
        ],
      };

      // Arreglo que ir√° cambiando din√°micamente
      let QUESTIONS = [FIRST_QUESTION];
    </script>

    <script src="db.js"></script>
    <script src="export.js"></script>
    <script src="app.js"></script>
  </body>
</html>
