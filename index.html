<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="container">
      <img src="./media/images/logos/logo.webp" alt="Pitamex" class="logo" />
      <h1>Registro</h1>

      <div id="form-root"></div>

      <div class="export-section">
        <button id="export">üì§ Exportar a Excel</button>
      </div>
    </main>
    <script src="./libs/js/xlsx.full.min.js"></script>

    <script>
      // Preguntas agrupadas por flujos
      const QUESTION_GROUPS = {
        // Si selecciona "Productor"
        plantOrEsqueaje: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
          {
            id: "q5",
            label: "Tipo de terreno",
            options: ["Propio", "Rentado", "Ejido"],
          },
          {
            id: "q6",
            label: "Superficie disponible (ha)",
            options: ["0.1", "1", "2-5", "5+"],
          },
          {
            id: "q4",
            label: "Disponibilidad de agua",
            options: ["Pozo", "Canal", "Pipa", "Solo lluvia"],
          },
          {
            id: "q7",
            label: "¬øZona con heladas?",
            options: ["S√≠", "No", "No s√©"],
          },
          {
            id: "q8",
            label: "¬øTiene energ√≠a el√©ctrica?",
            options: ["S√≠", "No"],
          },
          {
            id: "q9",
            label: "¬øCuenta con mano de obra?",
            options: ["S√≠", "A veces", "No"],
          },
          {
            id: "q10",
            label: "Nivel de decisi√≥n",
            options: ["100% seguro", "Evaluando", "Solo viendo"],
          },
          {
            id: "q11",
            label: "Tiempo estimado para iniciar",
            options: ["Inmediato", "Pr√≥ximo ciclo", "Sin fecha"],
          },
        ],
        // Si selecciona "Comercializador"
        frut: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Ciudad / Estado",
          },
          {
            id: "q5",
            label: "Tipo de fruta",
            options: ["Blanca", "Color", "Ambas"],
          },
          {
            id: "q6",
            label: "Volumen",
            options: ["5-50", "50-300", "300-1000", "1000"],
          },
          {
            id: "q7",
            label: "Frecuencia",
            options: ["√önica", "Semanal", "Quincenal", "Mensual", "Temporada"],
          },
          {
            id: "q8",
            label: "Presentaci√≤n",
            options: ["Granel", "Caja 5kg", "Caja 6.8kg", "Otro"],
          },
          {
            id: "q9",
            label: "Calidad",
            options: ["Seleccionada", "Comercial", "Segunda"],
          },
          {
            id: "q10",
            label: "Lugar de entrega",
            options: ["Negocio", "CEDIS", "Central", "Punto de carga"],
          },
          {
            id: "q11",
            label: "Flete",
            options: ["Cliente", "Proovedor", "Depende"],
          },
          {
            id: "q12",
            label: "Transporte",
            options: ["S√¨", "No"],
          },
          {
            id: "q13",
            label: "Pago",
            options: ["Contado", "Contra entrega", "Cr√®dito"],
          },
          {
            id: "q14",
            label: "Cr√®dito",
            options: ["7", "15", "30", ">30"],
          },
          {
            id: "q15",
            label: "Inicio",
            options: [
              "Inmediato",
              "Proxima semana",
              "Pr√≤ximo mes",
              "Solo viendo",
            ],
          },
        ],
        // Si selecciona "Consumidor"
        asesoryTec: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
          {
            id: "q5",
            label: "A√±os cultivo",
            options: ["<1", "1-3", "3-7", "7"],
          },
          {
            id: "q6",
            label: "Superficie(ha)",
          },
          {
            id: "q7",
            label: "Plantas",
          },
          {
            id: "q8",
            label: "Variedades",
          },
          {
            id: "q9",
            label: "Prop√≥sito",
            options: ["Local", "Central", "Exportaci√≤n", "Familiar"],
          },
          {
            id: "q10",
            label: "Tutor",
            options: ["Vivo", "Madera", "Concreto", "Acero", "Mixto"],
          },
          {
            id: "q11",
            label: "Riego",
            options: ["Goteo", "Microaspersi√≥n", "Pipa", "Temporal"],
          },
          {
            id: "q12",
            label: "Fertilizaci√≥n",
            options: ["Org√°nica", "Org√°nica", "Mixta", "No aplica"],
          },
          {
            id: "q13",
            label: "Problemas",
          },
          {
            id: "q14",
            label: "Estado cultivo",
            options: [
              "Plantas fuertes",
              "Plantas lentas",
              "Plantas amarillas",
              "Enfermedades visibles",
            ],
          },
          {
            id: "q15",
            label: "Producci√≥n",
            options: ["Inicio", "Media", "Estable ", "Baja", "Detenida"],
          },
          {
            id: "q16",
            label: "Objetivo",
            options: [
              "Producci√≥n",
              "Calidad",
              "Sanidad ",
              "Podas",
              "Nutrici√≥n",
            ],
          },
          {
            id: "q17",
            label: "Tipo asesor√≠a",
            options: [
              "Diagn√≥stico",
              "Mensual",
              "Capacitaci√≤n",
              "Visitas puntuales",
            ],
          },
          {
            id: "q18",
            label: "Involucramiento",
            options: [
              "Yo mismo",
              "Superviso personal",
              "Personal sin supervisi√≥n",
              "Proyecto inactivo",
            ],
          },
          {
            id: "q19",
            label: "Compromiso",
            options: [
              "100%",
              "Intermedio",
              "Depende del costo",
              "Orientaci√≥n b√°sica",
            ],
          },
          {
            id: "q20",
            label: "Visita",
            options: ["S√≠", "No"],
          },
        ],
        process: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Ciudad / Estado",
          },
          {
            id: "q5",
            label: "Rol",
            options: ["Propietario", "Compras", "Producci√≥n", "Otro"],
          },
          {
            id: "q6",
            label: "Uso",
            options: [
              "Congelado",
              "Deshidratado",
              "Pulpa",
              "Jugo",
              "Cosm√©tica",
              "Investigaci√≥n",
            ],
          },
          {
            id: "q7",
            label: "Planta",
            options: ["S√≠ propia", "S√≠ maquila", "No"],
          },
          {
            id: "q8",
            label: "Proceso",
            options: [
              "IQF",
              "Pulpa congelada",
              "Liofilizado",
              "Deshidratado convectivo",
              "Otro",
            ],
          },
          {
            id: "q9",
            label: "Volumen",
            options: ["50-200", "200-600", "600-1500", "1500"],
          },
          {
            id: "q10",
            label: "Frecuencia",
            options: ["√önica", "Semanal", "Quincenal", "Mensual", "Temporada"],
          },
          {
            id: "q11",
            label: "Estado fruta",
            options: [
              "Pulpa",
              "Entera congelada",
              "Trozos",
              "Deshidratada l√°mina",
              "Deshidratada cubo",
              "No definido",
            ],
          },
          {
            id: "q12",
            label: "Variedad",
            options: ["Blanca", "Roja/Rosa/Fucsia", "Ambas", "Indiferente"],
          },
          {
            id: "q13",
            label: "Grado industria",
            options: ["Seleccionada", "Grado industria", "Depende del precio"],
          },
          {
            id: "q14",
            label: "Lugar entrega",
            options: [
              "Planta propia",
              "CEDIS",
              "Central",
              "Transportista",
              "Por definir",
            ],
          },
          {
            id: "q14",
            label: "Flete",
            options: ["Cliente", "Proveedor", "Depende"],
          },
          {
            id: "q15",
            label: "Pago",
            options: ["Contado", "Contra entrega", "Cr√©dito"],
          },
          {
            id: "q16",
            label: "Cr√©dito",
            options: ["7", "15", "30", ">30"],
          },
          {
            id: "q16",
            label: "Inicio",
            options: [
              "Inmediato",
              "Pr√≥xima semana",
              "Pr√≥ximo mes",
              "Solo evaluando",
            ],
          },
        ],
        providers: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
          {
            id: "q5",
            label: "Perfil",
            options: [
              "Proveedor/Empresa",
              "Transportista/Log√≠stica",
              "Servicio T√©cnico/Consultor",
              "Perfil acad√©mico (Estudiante/Investigaci√≥n/Universidad)",
              "ONG/Proyecto Social",
              "Otro",
            ],
          },
          {
            id: "q6",
            label: "Inter√©s",
            options: [
              "Ser proveedor de PITAMEX",
              "Ofrecer productos a productores",
              "Alianza/Colaboraci√≥n",
              "Pr√°ctica/Residencia",
              "Investigaci√≥n/Proyecto",
              "Informaci√≥n",
            ],
          },
          {
            id: "q7",
            label: "Contacto",
            options: ["WhatsApp", "Llamada", "Correo"],
          },
        ],
        info: [
          { id: "q2", label: "Nombre completo", options: [] },
          {
            id: "q3",
            label: "Tel√©fono / WhatsApp",
          },
          {
            id: "q4",
            label: "Municipio / Estado",
          },
        ],
      };

      // Primera pregunta base
      const FIRST_QUESTION = {
        id: "q1",
        label: "Selecci√≥n de Inter√©s",
        // options: ["productor", "comercializador", "consumidor"],
        options: [
          { uuid: "plantOrEsqueaje", label: "Planta / Esqueje" },
          { uuid: "frut", label: "Fruta (Nacional / Exportaci√≥n)" },
          { uuid: "asesoryTec", label: "Asesor√≠a T√©cnica" },
          { uuid: "process", label: "Procesado (Congelado / Deshidratado)" },
          { uuid: "providers", label: "Proveedores / Alianzas / Estancias" },
          { uuid: "info", label: "Solo Informaci√≥n" },
        ],
      };

      // Arreglo que ir√° cambiando din√°micamente
      let QUESTIONS = [FIRST_QUESTION];
    </script>

    <script src="db.js"></script>
    <script src="export.js"></script>
    <script src="app.js"></script>
  </body>
</html>
